<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Secretaria Acadêmica</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* Variáveis de cor PRINCIPAIS (MANTIDAS COMO LIGHT MODE PADRÃO) */
        :root {
            --primary-color: #007bff; /* Azul primário mais vibrante (Boost) */
            --primary-light: #e6f7ff; /* Fundo de hover mais claro */
            --primary-darker: #0056b3; /* Cor mais escura para texto/ícone no hover/ativo */
            --text-color: #212529; /* Texto principal (quase preto) */
            --secondary-text-color: #6c757d; /* Texto secundário (cinza suave) */
            --icon-color: #adb5bd; /* Cor padrão do ícone */
            --sidebar-bg: #ffffff;
            --body-bg: #f8f9fa; /* Fundo do corpo muito claro */
            --border-color-light: #e9ecef; /* Linha divisória mais sutil */
            --demanda-highlight-color: #495057; /* Cor de destaque da seção */

            --transition-speed: 0.3s;
            --logout-hover-bg: #ffebee;
            --logout-hover-color: #dc3545; /* Vermelho de alerta */

            /* Variáveis para o Modal */
            --modal-bg-color: #ffffff;
            --modal-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            --input-border: #ced4da;
            --button-success: #28a745;
            --button-hover: #218838;
            
            /* NOVAS VARIÁVEIS PARA O MENU RECOLHIDO */
            --sidebar-width: 280px;
            --sidebar-width-collapsed: 90px; /* Nova largura reduzida */
        }

        /* ------------------------------------------- */
        /* ESTILOS BASE (LIGHT MODE) */
        /* ------------------------------------------- */

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--body-bg);
            display: flex;
            justify-content: flex-start;
            min-height: 100vh;
            overflow: hidden;
            transition: background-color var(--transition-speed) ease;
        }

        /* CLASSE MODIFICADA PARA DESFOQUE MAIS INTENSO */
        .content-blurred {
            /* Aumentado o blur para 15px, grayscale para 80% e adicionada opacidade baixa */
            filter: blur(15px) grayscale(80%) opacity(0.3);
            pointer-events: none; /* Desabilita interações no fundo */
            user-select: none;
            transition: filter var(--transition-speed) ease, opacity var(--transition-speed) ease; /* Transição para o blur e opacidade */
        }


        .sidebar {
            width: var(--sidebar-width); /* Uso da variável */
            background-color: var(--sidebar-bg);
            color: var(--text-color);
            padding: 0;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1); /* Sombra mais suave */
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            overflow-y: auto;
            z-index: 100;
            /* Adicionado overflow-x hidden para evitar barra horizontal na transição */
            overflow-x: hidden; 
            transition: width var(--transition-speed) ease, background-color var(--transition-speed) ease, color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
        }

        /* ESTILOS DO MENU RECOLHIDO */
        .sidebar.collapsed {
            width: var(--sidebar-width-collapsed);
        }

        .sidebar.collapsed .header {
            align-items: center; /* Centraliza a logo */
            padding: 25px 10px 20px 10px;
        }

        .sidebar.collapsed .header .logo-img {
            width: 50px; /* Reduz o tamanho da logo */
            height: 50px;
            margin-bottom: 0;
        }
        
        /* Oculta o texto do usuário */
        .sidebar.collapsed .user-info {
            display: none;
        }

        /* Oculta o título da seção */
        .sidebar.collapsed .menu-section-title {
            /* AJUSTE FINAL: Opacidade e Max-height para transição suave de colapso */
            opacity: 0;
            transform: scale(0.8); /* Efeito de encolhimento sutil */
            max-height: 0; /* O alvo da transição suave */
            padding-top: 0;
            padding-bottom: 0;
            margin: 0;
            pointer-events: none; /* Crucial: Desabilita a interação e remove o elemento do fluxo de eventos */
        }

        /* Oculta o texto do menu */
        .sidebar.collapsed .menu-item a span {
            display: none;
        }

        /* Centraliza os ícones do menu e ajusta o padding e margin */
        .sidebar.collapsed .menu-item a {
            justify-content: center;
            padding: 12px 0; /* Ajusta o padding */
            /* **AJUSTE:** Aumenta a margem vertical no menu recolhido */
            margin: 6px 5px; 
        }

        /* Reduz a margem do ícone quando o menu está recolhido */
        .sidebar.collapsed .menu-item a i {
            margin-right: 0; 
        }

        /* Garante que o item ativo tenha a borda na esquerda também no modo recolhido */
        .sidebar.collapsed .menu-item a.active::before {
             left: 0;
        }

        .content {
            margin-left: var(--sidebar-width); /* Uso da variável */
            padding: 0;
            flex-grow: 1;
            box-sizing: border-box;
            width: calc(100% - var(--sidebar-width));
            height: 100vh;
            transition: margin-left var(--transition-speed) ease, width var(--transition-speed) ease, filter var(--transition-speed) ease, opacity var(--transition-speed) ease;
        }
        
        /* ESTILOS DO CONTEÚDO QUANDO O MENU ESTÁ RECOLHIDO */
        .content.collapsed-margin {
            margin-left: var(--sidebar-width-collapsed);
            width: calc(100% - var(--sidebar-width-collapsed));
        }

        #main-frame {
            width: 100%;
            height: 100%;
            border: none;
        }

        .header {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 25px 20px 20px 20px;
            border-bottom: 1px solid var(--border-color-light);
            transition: border-color var(--transition-speed) ease;
            position: relative;
        }

        .logo-img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 10px;
            transition: width var(--transition-speed) ease, height var(--transition-speed) ease, margin var(--transition-speed) ease;
        }

        .user-info {
            text-align: center;
            transition: opacity var(--transition-speed) ease; 
        }

        .user-info h3 {
            margin: 0;
            line-height: 1.4;
            transition: color var(--transition-speed) ease;
        }

        .user-info h3:first-of-type {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-color);
        }

        .user-info h3:last-of-type {
            font-size: 14px;
            font-weight: 500;
            color: var(--secondary-text-color);
        }

        .menu-list {
            list-style: none;
            /* REMOVIDO: Padding para ser controlado pelas novas regras */
            padding: 0;
            margin: 0;
        }

        .main-menu-container {
            flex-grow: 1;
            overflow-y: auto;
            /* REFORÇADO: Padding inferior da lista principal */
            padding-bottom: 10px;
            overflow-x: hidden;
        }

        /* AJUSTES PARA DESTACAR E CENTRALIZAR */
        .menu-section-title {
            font-size: 16px; 
            font-weight: 700;
            color: var(--demanda-highlight-color);
            text-transform: uppercase;
            /* REFORÇADO O PADDING INFERIOR: Afasta do conteúdo */
            padding: 20px 20px 15px 20px; 
            margin: 0;
            border-top: 1px solid var(--border-color-light);
            letter-spacing: 1.5px;
            text-align: center;
            /* NOVO: MAX-HEIGHT e OVERFLOW para transição mais robusta */
            max-height: 70px; /* Valor suficiente para caber o texto + padding */
            overflow: hidden;
            /* SIMPLIFICADO: Use apenas uma transição 'all' */
            transition: all var(--transition-speed) ease;
        }
        
        .menu-section-title::after {
            content: '';
            display: block;
            width: 50px; 
            height: 2px;
            background: var(--primary-color);
            margin: 8px auto 0 auto;
            border-radius: 2px;
            transition: background var(--transition-speed) ease;
        }
        /* FIM DOS AJUSTES */


        .menu-item a {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            text-decoration: none;
            color: var(--text-color);
            font-size: 15px;
            font-weight: 500;
            transition: all var(--transition-speed) ease;
            position: relative;
            /* Alteração anterior para menu estendido (10px) */
            margin: 10px 10px 10px 10px;
            border-radius: 8px;
        }
        
        /* NOVO ESTILO: Ajusta a lista de Fluxos */
        #demanda-items {
            /* Adiciona o padding superior para afastar os itens do título e criar o espaço da linha */
            padding: 0 0 10px 0; 
        }

        /* NOVO ESTILO: Remove a margem superior do PRIMEIRO item da seção de Fluxos */
        /* Isso faz com que a borda do título fique imediatamente acima do primeiro item */
        #demanda-items .menu-item:first-child a {
            margin-top: 0; 
        }
        
        .menu-item a span {
            transition: opacity var(--transition-speed) ease;
        }

        .menu-item a:hover {
            background-color: var(--primary-light);
            color: var(--primary-darker);
            border-radius: 8px;
        }

        .menu-item a.active {
            background-color: var(--primary-light);
            color: var(--primary-color);
            font-weight: 600;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 123, 255, 0.1);
        }

        .menu-item a.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--primary-color);
            border-radius: 8px 0 0 8px;
            transition: background var(--transition-speed) ease;
        }

        .menu-item a i {
            width: 25px;
            text-align: center;
            margin-right: 15px;
            font-size: 18px;
            color: var(--icon-color);
            transition: color var(--transition-speed) ease, margin-right var(--transition-speed) ease;
        }

        .menu-item a:hover i, .menu-item a.active i {
            color: var(--primary-color);
        }

        .logout-section {
            border-top: 1px solid var(--border-color-light);
            padding: 10px 0 5px 0;
            transition: border-color var(--transition-speed) ease;
        }

        .logout-section .menu-item a {
            color: var(--secondary-text-color);
            font-weight: 500;
            /* Mantido em 10px para espaçamento vertical */
            margin: 10px 10px 10px 10px;
        }
        .logout-section .menu-item a:hover {
            color: var(--logout-hover-color);
            background-color: var(--logout-hover-bg);
        }
        .logout-section .menu-item a i {
            color: var(--icon-color);
        }
        .logout-section .menu-item a:hover i {
            color: var(--logout-hover-color);
        }


        /* ------------------------------------------- */
        /* ESTILOS DO TOGGLE SWITCH (MOVIDO PARA O RODAPÉ) */
        /* ------------------------------------------- */
        
        /* Nova seção para o toggle */
        .toggle-section {
            border-top: 1px solid var(--border-color-light);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all var(--transition-speed) ease;
        }

        /* Ajustes no modo recolhido */
        .sidebar.collapsed .toggle-section {
            justify-content: center; /* Centraliza o switch */
            padding: 15px 0; /* Remove padding lateral */
        }
        
        .toggle-text {
            font-size: 15px;
            font-weight: 500;
            color: var(--secondary-text-color);
            transition: opacity var(--transition-speed) ease;
        }

        .sidebar.collapsed .toggle-text {
            opacity: 0; /* Oculta o texto "Recolher Menu" */
            width: 0;
            overflow: hidden;
            display: none; /* Garante que não interfira no layout */
        }

        .toggle-switch input {
            display: none;
        }

        .toggle-switch label {
            display: block;
            width: 40px;
            height: 20px;
            background-color: var(--border-color-light);
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: background-color var(--transition-speed) ease;
        }

        .toggle-switch label::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background-color: var(--sidebar-bg);
            border-radius: 50%;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
            transition: transform var(--transition-speed) ease, background-color var(--transition-speed) ease;
        }

        .toggle-switch input:checked + label {
            background-color: var(--primary-color);
        }

        .toggle-switch input:checked + label::after {
            transform: translateX(20px);
        }


        /* ------------------------------------------- */
        /* ESTILOS DO MODAL DE LOGIN (SEM ALTERAÇÃO) */
        /* ------------------------------------------- */

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: var(--modal-bg-color);
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--modal-shadow);
            width: 90%;
            max-width: 400px;
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color-light);
        }

        .modal-header h4 {
            margin: 0;
            font-weight: 700;
            color: var(--primary-color);
            font-size: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--text-color);
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--input-border);
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 15px;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .form-group input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
            outline: none;
        }

        .modal-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        .modal-buttons button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.2s ease;
            flex-grow: 1;
            margin: 0 5px;
        }

        #login-button {
            background-color: var(--button-success);
            color: white;
        }

        #login-button:hover {
            background-color: var(--button-hover);
        }

        #cancel-button {
            background-color: var(--secondary-text-color);
            color: white;
        }

        #cancel-button:hover {
            background-color: #5a6268;
        }

        #login-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-weight: 500;
            display: none;
            text-align: center;
        }

        .message-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>

<div class="modal-overlay" id="login-modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h4>Acesso Restrito - Supervisores</h4>
        </div>
        <form id="login-form">
            <div class="form-group">
                <label for="username">Usuário:</label>
                <input type="text" id="username" required>
            </div>
            <div class="form-group">
                <label for="password">Senha:</label>
                <input type="password" id="password" required>
            </div>
            <div id="login-message" class="message-error"></div>
            <div class="modal-buttons">
                <button type="button" id="cancel-button">Cancelar</button>
                <button type="submit" id="login-button">Entrar</button>
            </div>
        </form>
    </div>
</div>
<div class="sidebar content-blurred" id="sidebar">

    <div class="header">
        <img src="https://drive.google.com/thumbnail?id=18WhdWeW61paD_dHxoo4SLwZLB3RAbSkl&sz=w1000" alt="Logo Codinglab" class="logo-img">
        <div class="user-info">
            <h3>Secretaria</h3>
            <h3>Acadêmica Unicesumar</h3>
        </div>
    </div>

    <div class="main-menu-container">
        <ul class="menu-list" id="menu-items">
            <li class="menu-item"><a href="#" class="active" data-page="analise semanal.html" id="link-inicio"><i class="fa-solid fa-house"></i><span>Início</span></a></li>
            <li class="menu-item"><a href="#" data-page="analise semanal.html"><i class="fa-solid fa-chart-line"></i><span>Análise Semanal</span></a></li>
            <li class="menu-item"><a href="#" data-page="manutencao.html" id="link-supervisores"><i class="fa-solid fa-user-tie"></i><span>Supervisores</span></a></li> 
            <li class="menu-item"><a href="#" data-page="manutencao.html"><i class="fa-solid fa-chalkboard-teacher"></i><span>Treinamentos</span></a></li>
            <li class="menu-item"><a href="#" data-page="reunioes e eventos.html"><i class="fa-solid fa-calendar-days"></i><span>Reuniões/Eventos</span></a></li>
        </ul>

        <h3 class="menu-section-title">Fluxos de Atendimento</h3>
        <ul class="menu-list" id="demanda-items">
            <li class="menu-item"><a href="#" data-page="emissao.html"><i class="fa-solid fa-folder-open"></i><span>Emissão</span></a></li>
            <li class="menu-item"><a href="#" data-page="manutencao.html"><i class="fa-solid fa-user-plus"></i><span>Ingresso</span></a></li>
            <li class="menu-item"><a href="#" data-page="manutencao.html"><i class="fa-solid fa-check-double"></i><span>Validação</span></a></li>
            <li class="menu-item"><a href="#" data-page="manutencao.html"><i class="fa-solid fa-graduation-cap"></i><span>Educação Continuada</span></a></li>
            <li class="menu-item"><a href="#" data-page="manutencao.html"><i class="fa-solid fa-graduation-cap"></i><span>Desenv & Qualidade</span></a></li>
            <li class="menu-item"><a href="#" data-page="manutencao.html"><i class="fa-solid fa-life-ring"></i><span>Suporte Técnico</span></a></li>
            </ul>  
    </div>

    <div class="toggle-section">
        <span class="toggle-text">Recolher Menu</span>
        <div class="toggle-switch">
            <input type="checkbox" id="sidebar-toggle" />
            <label for="sidebar-toggle" title="Recolher Menu"></label>
        </div>
    </div>

    <div class="logout-section">
        <ul class="menu-list" style="padding: 0; margin: 0;">
            <li class="menu-item">
                <a href="#" data-page="logout.html">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    <span>Sair</span>
                </a>
            </li>
        </ul>
    </div>

    </div>

<div class="content content-blurred" id="content">
    <iframe id="main-frame" src="home-dashboard.html"></iframe>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const menuContainers = [
            document.getElementById('menu-items'), 
            document.getElementById('demanda-items') 
        ];
        const mainFrame = document.getElementById('main-frame');
        
        // Novos elementos para o Modal
        const loginModalOverlay = document.getElementById('login-modal-overlay');
        const loginForm = document.getElementById('login-form');
        const linkSupervisores = document.getElementById('link-supervisores');
        const linkInicio = document.getElementById('link-inicio'); 
        const cancelButton = document.getElementById('cancel-button');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginMessage = document.getElementById('login-message');
        const sidebar = document.getElementById('sidebar');
        const content = document.getElementById('content');
        
        // NOVO ELEMENTO: Toggle Switch
        const sidebarToggle = document.getElementById('sidebar-toggle');


        // Contas de Acesso
        const VALID_CREDENTIALS = {
            'admin': '123456',
            'super1': 'senha1',
            'super2': 'senha2',
            'gerente': 'gerencia'
        };

        // --- Funções Auxiliares ---

        const removeAllActiveClasses = () => {
             // Garante que TODOS os links percam a classe 'active', incluindo o logout
             document.querySelectorAll('.menu-item a').forEach(link => {
                 link.classList.remove('active');
             });
        };
        
        // --- NOVO: Função para alternar o estado do menu ---
        const toggleSidebar = () => {
            const isCollapsed = sidebar.classList.toggle('collapsed');
            content.classList.toggle('collapsed-margin', isCollapsed);
            
            // Salva o estado do menu no localStorage (opcional, mas bom para persistência)
            localStorage.setItem('sidebarCollapsed', isCollapsed);
        };
        
        // --- NOVO: Função para carregar o estado do menu ---
        const loadSidebarState = () => {
            const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
            sidebarToggle.checked = isCollapsed; // Sincroniza o switch
            if (isCollapsed) {
                sidebar.classList.add('collapsed');
                content.classList.add('collapsed-margin');
            }
        };

        // --- Funções para o Modal ---

        const showLoginModal = (e) => {
            e.preventDefault(); 
            // Remove o 'active' do item de menu clicado antes de abrir o modal
            removeAllActiveClasses(); 
            
            // Adiciona classes de desfoque
            sidebar.classList.add('content-blurred');
            content.classList.add('content-blurred');

            // Exibe o modal
            loginModalOverlay.style.display = 'flex';
            setTimeout(() => {
                loginModalOverlay.classList.add('active');
                usernameInput.focus();
            }, 10); // Pequeno delay para transição
        };

        const hideLoginModal = () => {
            // Remove classes de desfoque
            sidebar.classList.remove('content-blurred');
            content.classList.remove('content-blurred');
            
            // Volta para a página "Início" e a marca como ativa
            removeAllActiveClasses();
            if (linkInicio) {
                linkInicio.classList.add('active');
                const initialPage = linkInicio.getAttribute('data-page') === 'manutencao.html' ? 'home-dashboard.html' : linkInicio.getAttribute('data-page');
                mainFrame.src = initialPage;
            }

            // Esconde o modal
            loginModalOverlay.classList.remove('active');
            setTimeout(() => {
                loginModalOverlay.style.display = 'none';
                loginMessage.style.display = 'none';
                loginForm.reset();
            }, 300); // Espera a transição acabar
        };

        const handleLogin = (e) => {
            e.preventDefault();
            const user = usernameInput.value.trim();
            const pass = passwordInput.value.trim();

            loginMessage.style.display = 'none';

            // AJUSTE CRUCIAL: Verificação explícita da existência do usuário
            if (VALID_CREDENTIALS.hasOwnProperty(user) && VALID_CREDENTIALS[user] === pass) {
                // Login bem-sucedido
                hideLoginModal();
                
                // Marca o link "Supervisores" como ativo
                removeAllActiveClasses();
                linkSupervisores.classList.add('active');
                
                // Navega para a página restrita 
                const pageUrl = linkSupervisores.getAttribute('data-page');
                mainFrame.src = pageUrl;
            } else {
                // Login falhou
                loginMessage.textContent = 'Usuário ou senha inválidos.';
                loginMessage.style.display = 'block';
                passwordInput.value = ''; // Limpa apenas a senha
                passwordInput.focus();
            }
        };


        // --- Lógica do Menu ---
        
        // 1. Carrega o estado inicial do menu (se estiver salvo)
        loadSidebarState();
        
        // 2. Define a página inicial no iframe e o item ativo ao carregar
        if (linkInicio) {
             const initialPage = linkInicio.getAttribute('data-page') === 'manutencao.html' ? 'home-dashboard.html' : linkInicio.getAttribute('data-page');
             mainFrame.src = initialPage; 
             linkInicio.classList.add('active'); 
        } else {
            mainFrame.src = "home-dashboard.html"; 
        }

        // 3. Adiciona listener para o NOVO Toggle Switch
        sidebarToggle.addEventListener('change', toggleSidebar);

        // 4. Adiciona listener para o link "Supervisores"
        linkSupervisores.addEventListener('click', showLoginModal);
        
        // 5. Adiciona listener para o botão "Cancelar"
        cancelButton.addEventListener('click', hideLoginModal);

        // 6. Adiciona listener para o Formulário de Login (usa a função handleLogin ajustada)
        loginForm.addEventListener('submit', handleLogin);

        // 7. Adiciona listener para os demais menus (Ajustado)
        [...menuContainers, document.querySelector('.logout-section')].forEach(container => {
            if (container) {
                container.addEventListener('click', (e) => {
                    const targetLink = e.target.closest('a');

                    // Impede o clique em links se o modal estiver ativo
                    if (loginModalOverlay.style.display === 'flex') return;

                    // O link "Supervisores" já tem um handler específico (showLoginModal)
                    if (targetLink && targetLink.id === 'link-supervisores') {
                        return; 
                    }

                    if (targetLink && targetLink.hasAttribute('data-page')) {
                        e.preventDefault(); 
                        
                        // Remove ativo de todos
                        removeAllActiveClasses();
                        
                        // Adiciona 'active' no link, exceto no logout
                        if (!targetLink.parentElement.parentElement.classList.contains('logout-section')) {
                            targetLink.classList.add('active');
                        }
                        
                        const pageUrl = targetLink.getAttribute('data-page');
                        mainFrame.src = pageUrl;
                    }
                });
            }
        });

        // -----------------------------------------------------
        // --- MEDIDAS DE "SEGURANÇA POR OBSCURIDADE" (MELHORADAS) ---
        // -----------------------------------------------------

        // Desabilita o menu de contexto (botão direito do mouse)
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        // Desabilita teclas comuns do DevTools e outras
        document.addEventListener('keydown', function(e) {
            // F12 check
            const isF12 = e.key === 'F12' || e.keyCode === 123;
            // Ctrl+Shift+I check (I = 73)
            const isCtrlShiftI = e.ctrlKey && e.shiftKey && (e.key === 'I' || e.keyCode === 73);
            // Ctrl+Shift+J check (J = 74)
            const isCtrlShiftJ = e.ctrlKey && e.shiftKey && (e.key === 'J' || e.keyCode === 74);
            // Ctrl+U check (U = 85) - Ver Código Fonte
            const isCtrlU = e.ctrlKey && (e.key === 'U' || e.keyCode === 85);
            // Ctrl+S check (S = 83) - Impede Salvar Página
            const isCtrlS = e.ctrlKey && (e.key === 'S' || e.keyCode === 83);
            // Ctrl+Shift+C check (C = 67) - Selecionar Elemento
            const isCtrlShiftC = e.ctrlKey && e.shiftKey && (e.key === 'C' || e.keyCode === 67);

            if (isF12 || isCtrlShiftI || isCtrlU || isCtrlShiftJ || isCtrlS || isCtrlShiftC) {
                e.preventDefault();
            }
        });
        
        // Novo: Detecção Ativa de DevTools (console.log)
        const devtoolsCheck = () => {
            const threshold = 100; // Tempo limite em milissegundos
            const loop = () => {
                const start = performance.now();
                console.log('%c', 'display: none'); 
                const end = performance.now();
                
                if (end - start > threshold) {
                    document.body.innerHTML = '<h1>Acesso negado.</h1>';
                }
                
                setTimeout(loop, 500);
            };
            // Se quiser reativar a segurança por obscuridade, descomente a linha abaixo
            // if (window.console && window.console.log) { loop(); }
        };
        // Tenta iniciar a checagem se o console estiver disponível
        if (window.console && window.console.log) {
            // devtoolsCheck(); // Descomente para ativar a checagem de DevTools
        }

        // Inicializa o conteúdo com o blur removido 
        sidebar.classList.remove('content-blurred');
        content.classList.remove('content-blurred');


        // -----------------------------------------------------
        // --- FIM MEDIDAS DE "SEGURANÇA POR OBSCURIDADE" ---
        // ------------------------------------------------------
    });
</script>

</body>
</html>